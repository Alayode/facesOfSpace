{"version":3,"sources":["server.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAsBA,IAAI,IAAI,GAAK,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAI,KAAK,GAAI,OAAO,CAAC,OAAO,CAAC,CAAC;AAC9B,IAAI,MAAM,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AACrC,IAAI,MAAM,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;;AAIrC,IAAI,OAAO,GAAM,OAAO,CAAC,SAAS,CAAC,CAAC;AACpC,IAAI,IAAI,GAAS,OAAO,CAAC,MAAM,CAAC,CAAC;AACjC,IAAI,MAAM,GAAQ,OAAO,CAAC,QAAQ,CAAC,CAAC;AACpC,IAAI,UAAU,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;;;;;AAKxC,IAAI,KAAK,GAAG,OAAO,EAAE,CAAC;;AAEtB,KAAK,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC;AAC5C,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;AACzB,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;AAC7B,KAAK,CAAC,GAAG,CAAC,OAAO,UAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;;;;AAKzD,KAAK,CAAC,GAAG,CAAC,UAAS,GAAG,EAAE,GAAG,EAAE;AACzB,UAAM,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,EAAE,UAAS,OAAO,EAAE;AAC3C,YAAI,IAAI,GAAG,KAAK,CAAC,cAAc,CAAC,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC;AAC9D,YAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,kBAAkB,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AAC/D,WAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAClB,CAAC,CAAC;CACN,CAAC,CAAC;;;;;;;;;;AAWH,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;AACjD,IAAI,EAAE,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,CAAC;AACtC,IAAI,WAAW,GAAG,CAAC,CAAC;;AAEpB,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,YAAY,EAAE,UAAS,MAAM,EAAE;AACzC,eAAW,EAAE,CAAC;;AAEd,MAAE,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE,CAAC,CAAC;;AAE7D,UAAM,CAAC,EAAE,CAAC,YAAY,EAAE,YAAW;AAC/B,mBAAW,EAAE,CAAC;AACd,UAAE,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE,CAAC,CAAC;KAChE,CAAC,CAAC;CACN,CAAC,CAAC;;AAEH,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,YAAW;AACxC,WAAO,CAAC,GAAG,CAAC,mCAAmC,GAAG,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;CACxE,CAAC,CAAC","file":"server-compiled.js","sourcesContent":["\n/*\n* Chris Samuel\n* ksamuel.chris@icloud.com\n*\n* October 1, 2015\n*\n* FileName: server.js\n*\n* Description:\n*\n* File will be used for running node/express for our voting application.\n* Chris Samuel\n* ksamuel.chris@gmail.com\n*\n* October,\n*\n*\n* */\n\n//React Routes\n\nvar swig   = require('swig');\nvar React  = require('react');\nvar Router = require('react-router');\nvar routes = require('./app/routes');\n\n\n\nvar express =    require('express');\nvar path    =    require('path');\nvar logger  =     require('morgan');\nvar bodyParser = require('body-parser');\n//var babel =      require(\"babel-core\").transform(\"code\", options);\n\n//add some juice!!!\n\nvar juice = express();\n\njuice.set('port', process.env.PORT || 9876);\njuice.use(logger('dev'));\njuice.use(bodyParser.json());\njuice.use(express.static(path.join(__dirname,'public')));\n\n\n// Express middleware  components\n// WILL BE EXECUTED ON EVERY REQUEST TO THE SERVER.\njuice.use(function(req, res) {\n    Router.run(routes, req.path, function(Handler) {\n        var html = React.renderToString(React.createElement(Handler));\n        var page = swig.renderFile('views/index.html', { html: html });\n        res.send(page);\n    });\n});\n\n\n//  TODO: Replace this block of code for socket.IO\n//juice.listen(juice.get('port'),function(){\n//    console.log('Express server is using the JUICE on port ' + juice.set('port'));\n//});\n\n/**\n * Socket.io stuff.\n */\nvar server = require('http').createServer(juice);\nvar io = require('socket.io')(server);\nvar onlineUsers = 0;\n\nio.sockets.on('connection', function(socket) {\n    onlineUsers++;\n\n    io.sockets.emit('onlineUsers', { onlineUsers: onlineUsers });\n\n    socket.on('disconnect', function() {\n        onlineUsers--;\n        io.sockets.emit('onlineUsers', { onlineUsers: onlineUsers });\n    });\n});\n\nserver.listen(juice.get('port'), function() {\n    console.log('Express server listening on port ' + juice.get('port'));\n});\n/*\n* Explanation for refactor with socket.io\n*\n* WebSocket connections are established. With this block of code\n* when it does, the onlineUsers count will increase by 1 (This is a\n* global variable )and a message is then broadcasts\n*\n* \" Hey I have this many users right now .\"\n*\n* When someone closes a connection the count is then decreased by one\n* This will then run another message stating hey I have this many online users now.\n*\n*\n*\n*\n*\n* */"]}